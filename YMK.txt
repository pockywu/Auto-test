*** Settings ***
Suite Setup       Open APP
Library           AppiumLibrary
Resource          Resource/YMK_Keyword.robot

*** Variables ***
${REMOTE_URL}     http://localhost:4723/wd/hub
${platformName}    Android
${platformVersion}    8
${deviceName}     Android
${appPackage}     com.cyberlink.youcammakeup
${appActivity}    activity.SplashActivity
${automationName}    UiAutomator2
${noReset}        False    #Ture: don't reset when open app. False: reset when open app
${autoGrantPermissions}    True    #Auto allow permission
${language}       CHS

*** Test Cases ***
Select Album
    Pass Tutorial
    Select Album    YouCam Makeup

Select sample photo
    Select Sample Photo

Take photo then enter edit room
    Pass Tutorial
    Enter Makeup Cam
    Wait Until Page Contains Element    com.cyberlink.youcammakeup:id/before
    Click Element    com.cyberlink.youcammakeup:id/before    #take photo
    Wait Until Page Contains Element    com.cyberlink.youcammakeup:id/makeupButtonImage
    Click Element    com.cyberlink.youcammakeup:id/makeupButtonImage    #enter edit room

Apply lip color in makeup cam
    Pass Tutorial
    Enter Makeup Cam
    Wait Until Page Contains    MAKEUP    timeout=10
    Click text    MAKEUP
    Wait Until Page Contains    Lip Color
    Click text    Lip Color
    Click Element    com.cyberlink.youcammakeup:id/colorItemColor    #select color ball
    Click A Point    x=1008    y=388    #adjust intensity to 100, 用抓點的方式很爛，看有沒有更好的方法可以調整slide bar
    Click Element    com.cyberlink.youcammakeup:id/after    #take photo

Subsribe when select Smart HD
    Pass Tutorial
    Set photo quality    Smart HD
    Subsribe

Switch to test server
    Pass Tutorial
    Click Element    com.cyberlink.youcammakeup:id/launcherSettingButton
    Sleep    1
    : FOR    ${i}    IN RANGE    1    20    #向下划直到找到"About" text
    \    Swipe    400    1000    400    300    400
    \    ${count}    Get Matching Xpath Count    xpath=//*[contains(@text, '${about}')]
    \    Exit For Loop If    ${count}>0
    Click text    ${about}
    Wait Until Page Contains Element    com.cyberlink.youcammakeup:id/launcherTestSettingBtn
    Repeat Keyword    5    Click Element    com.cyberlink.youcammakeup:id/launcherTestSettingBtn
    Sleep    1
    : FOR    ${i}    IN RANGE    1    20    #向下划直到找到"Is Test Server" text
    \    Swipe    400    1000    400    300    400
    \    ${count}    Get Matching Xpath Count    xpath=//*[contains(@text, 'Is Test Server')]
    \    Exit For Loop If    ${count}>0
    Click Element    com.cyberlink.youcammakeup:id/item_switch
    Click Element    com.cyberlink.youcammakeup:id/testSettingApplyBtn
    Wait Until Page Contains Element    com.cyberlink.youcammakeup:id/alertDialog_buttonPositive
    Click Element    com.cyberlink.youcammakeup:id/alertDialog_buttonPositive

Switch Country
    Pass Tutorial
    Switch Country    Taiwan

Language test
    Syetem language    ${language}
    Pass Tutorial
    Click text    ${photomakeup}

1.1 VPN to China and launch YMK
    Wait Until Page Contains Element    com.fvcorp.flyclient:id/selectedServerLayout
    Click Element    com.fvcorp.flyclient:id/selectedServerLayout
    : FOR    ${i}    IN RANGE    1    20
    \    Swipe    400    1000    400    300    400
    \    ${count}    Get Matching Xpath Count    xpath=//*[contains(@text, '中国')]
    \    Exit For Loop If    ${count}>0
    Click text    中国
    Sleep    1
    : FOR    ${i}    IN RANGE    1    20
    \    Swipe    400    1000    400    300    400
    \    ${count}    Get Matching Xpath Count    xpath=//*[contains(@text, '上海61')]
    \    Exit For Loop If    ${count}>0
    Click text    上海61
    Open App
    Pass Tutorial

1.2 Swtich Country to China
    Open App
    Pass Tutorial
    Switch Country    China

Test case 1 2 3 45
    [Documentation]    First line
    ...    \ \ Second line in \ \ \ multiple parts
    Open App
